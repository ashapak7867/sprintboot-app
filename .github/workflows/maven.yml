# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI with Maven

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:

    runs-on: ubuntu-latest
   
    steps:
    - uses: actions/checkout@v3
    - name: Set up JDK 11
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
        cache: maven
        
   # - name: working dir
    #  run: ls
    #- name: Checkout
     # uses: actions/checkout@v2
      #with:
       #  repository: ashapak7867/java-spring-app
        # ref: main
         #path: ./java-spring-app
         #run: ls
         
   # - name: add subtree 
    #  run: |
            #git remote add my-subtree git@github.com:ashapak7867/java-spring-app.git
     #       git remote add my-subtree origin https://github.com/ashapak7867/java-spring-app.git
            #ls -l 
          
      #      ls
       #     git subtree add --prefix=resources my-subtree main
          
        #    git push origin main
    - name: Build with Maven
      run: mvn --file pom.xml && --file .git/refs/heads/sub-branch/ojdbc8-19.3.0.0.jar -B package
    - name: create folder
      run: mkdir save && cp /home/runner/work/sprintboot-app/sprintboot-app/target/test-0.0.1-SNAPSHOT-boot.war save
    - name: upload artifiacts
      uses: actions/upload-artifact@v3
      with:
       name: my-artifact
       path: save
      
